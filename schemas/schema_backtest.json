{
  "schema_version": "ai-crypto-buy/1.0",
  "strategy_name": "TwoLayer_Scalp",
  "assets": ["BTCUSDT", "ETHUSDT", "SOLUSDT", "BNBUSDT", "XRPUSDT", "ADAUSDT"],
  "timeframes": {
    "direction": ["30m", "15m", "5m"],
    "entries": ["1m", "3m", "5m"]
  },
  "regime_layer": {
    "tf_weights": { "30m": 0.5, "15m": 0.3, "5m": 0.2 },
    "indicators": {
      "ema": {
        "fast": { "30m": 12, "15m": 9, "5m": 9 },
        "slow": { "30m": 34, "15m": 21, "5m": 21 },
        "long": { "30m": 200, "15m": 200, "5m": 100 },
        "k_atr": 1.5,
        "weight": 0.35
      },
      "macd": {
        "fast": { "30m": 12, "15m": 12, "5m": 8 },
        "slow": { "30m": 26, "15m": 26, "5m": 21 },
        "signal": { "30m": 9, "15m": 9, "5m": 5 },
        "norm_window": 100,
        "weight": 0.25
      },
      "rsi": { "length": { "30m": 14, "15m": 14, "5m": 7 }, "smoothing_ema": 3, "weight": 0.20 },
      "adx": { "length": 14, "gate_below": 20, "gate_factor": 0.5, "weight": 0.10 },
      "obv": { "slope_lookback": 20, "norm_median_lookback": 200, "weight": 0.10 }
    },
    "atr_gate_thresholds_pct": { "30m": 0.0025, "15m": 0.0018, "5m": 0.0012 },
    "score_normalization": "tanh",
    "softmax_temperature": 0.35,
    "hysteresis": { "buy_on_above": 0.60, "buy_exit_below": 0.45, "sell_on_above": 0.60, "sell_exit_below": 0.45 }
  },
  "risk_management": {
    "position_sizing": { "risk_pct_per_trade": 0.005, "max_leverage": 3.0, "min_notional": 10.0 },
    "portfolio": { "max_concurrent_positions": 3, "max_pair_exposure_pct": 0.5 },
    "session_limits": { "max_daily_loss_pct": 0.03, "max_daily_trades": 30 },
    "liquidity_filters": { "min_roll_vol_usd_20": 2000000.0, "max_spread_bps": 4.0 }
  },
  "costs": { "maker_fee_rate": 0.0002, "taker_fee_rate": 0.0008, "slippage_max_bps": 5.0, "funding_rate_daily_cap": 0.0010 },
  "backtest": {
    "timezone": "UTC",
    "include_fees": true,
    "include_slippage": true,
    "walk_forward": { "train_days": 90, "test_days": 30, "segments": 8 },
    "oos_holdout_days": 60,
    "metrics": ["NetProfit","PF","Sharpe","Sortino","MaxDD","HitRate","AvgRR","Turnover"]
  },
  "optimization": {
    "engine": "optuna",
    "objective": { "type": "multi", "maximize": ["PF","Sharpe"], "minimize": ["MaxDD","Turnover"], "weights": {"PF": 0.4, "Sharpe": 0.3, "MaxDD": -0.2, "Turnover": -0.1} },
    "global_constraints": { "min_trades": 200, "min_pf": 1.2 },
    "grids": {
      "regime": {
        "ema_fast": [7, 9, 12], "ema_slow": [21, 26, 34], "ema_long": [100, 200],
        "macd": [[8,21,5],[12,26,9]], "rsi_length": [7,10,14],
        "hysteresis_buy_exit": [[0.6,0.45],[0.65,0.5]],
        "atr_gate_pct_scale": [0.8,1.0,1.2], "softmax_temperature": [0.3,0.35,0.4],
        "tf_weights_sets": [ { "30m": 0.5, "15m": 0.3, "5m": 0.2 }, { "30m": 0.4, "15m": 0.4, "5m": 0.2 } ]
      }
    }
  },
  "outputs": {
    "signals": { "buy_threshold": 0.60, "sell_threshold": 0.60, "hold_band": [0.40, 0.60] },
    "export": { "format": "parquet", "columns": ["timestamp","symbol","tf","p_buy","p_hold","p_sell","entry_set","side","sl","tp","size"] }
  }
}